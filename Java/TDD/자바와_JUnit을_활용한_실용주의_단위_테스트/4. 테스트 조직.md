# 1. AAA로 테스트 일관성 유지

```java
public class JUnitTestSample {
    @Test
    public void ansertArithmeticMeanOfTwoNumbers() {
        //Arrange
        ScoreCollection collection = new ScoreCollection();
        collection.add(() -> 5);

        //Act
        int actualResult = collection.arithmeticMean();

        //Assert
        assertThat(actualResult, equalTo(5));
    }
}
```

- `준비(Arrange)`
    - 테스트 코드를 실행하기 전, 시스템이 적절한 상태에 있는지 확인한다.
    - 시스템이 이미 우리가 필요한 상태로 있다면, 생략 가능하다.
- `실행(Act)`
    - 테스트 코드를 실행한다.
- `단언(Assert)`
    - 실행한 코드가 기대한 대로 동작하는지 확인한다.
    - 테스트한 코드와 다른 객체들 사이의 의사소통을 검사하기도 한다.
- `사후(After - Option)`
    - 테스트에 사용하기 위해 할당한 자원들을 정리한다.

</br>

# 2. 동작 테스트 vs 메서드 테스트
- 테스트를 작성할 때는 개별 메서드를 테스트한다고 생각하면 안되고, **클래스 동작**에 집중해야 한다.

</br>

# 3. 테스트와 프로덕션 코드의 관계
- 테스트는 주어진 프로젝트 안에서 프로덕션 코드와 분리해야 한다.
- 테스트 코드는 프로덕션 코드를 의존해야 하지만, 그 반대는 해당되지 않는다.
- 우리의 삶은 테스트 친화적인 설계를 채택할수록 편해지고 설계 자체도 좋아진다.

## 테스트와 프로덕션 코드 분리
### 테스트를 프로덕션 코드와 같은 패키지에 넣기
- 절대 하지 않는다.
### 테스트를 별도 패키지로 분리하지만 프로덕션과 같은 패키지에 넣기
- 대부분 이렇게 사용한다.
### 테스트를 별도의 디렉터리와 유사한 패키지에 유지하기
- 상황에 맞게 적용한다.

</br>

## 내부 데이터 노출 vs 내부 동작 노출
- 테스트가 더 많이 깨질수록 프로그래머는 리팩토링을 꺼린다.
- **리팩토링**을 하지 않을수록 코드 베이스는 빠르게 퇴화한다.
- 테스트를 위해 내부 데이터를 노출하는 것은 테스트와 프로덕션 사이에 **과도한 결합**을 초래한다.
- 내부 행위를 테스트 하려는 생각이 든다면, 설계에 문제가 있는 것이다.

</br>

# 4. 집중적인 단일 목적 테스트의 가치
- 테스트는 기능별로 분리해야 한다. 그래야 실패한 곳을 빠르게 찾고, 문제를 파악할 수 있다.
- 테스트는 기능별로 분리되어야 모든 케이스가 실행되었음을 보장할 수 있다.

</br>

# 5. 문서로의 테스트
## 일관성 있는 이름으로 테스트 문서화
- 테스트는 작은 단위여야 각각 분명한 행동에 집중할 수 있다.
- 합리적인 테스트명은 보통 (영어)단어 일곱개 정도 구성되어 있다.
- 가장 중요한 목표는, 테스트 코드를 다른 사람에게 의미 있게 만드는 것이다.

## 테스트를 의미있게 만들기
- 다른 사람이 테스트의 목적을 파악하기 어려워 한다면 다음을 고려 해 보자.
1. 지역 변수 이름 개선하기
2. 의미 있는 상수 도입하기
3. 햄크레스트 단언 사용하기
4. 커다란 테스트를 작게 나누어 집중적인 테스트 만들기
5. 테스트 군더더기들을 도우미 메서드와 `@Before` 메서드로 이동하기

</br>

# 6. @Before와 @After(공통 초기화와 정리) 더 알기
- `@Before` : 매번테스트 메서드 실행에 앞서 실행한다.
- 다수의 `@Before`이 존재하면 실행 순서를 보장하지 않으므로 주의한다.
- `@After` : 각 테스트를 한 후 실행된다.
- `@After`는 테스트를 실패하더라도 실행된다.

## BeforeClass와 AfterClass
- 클래스 수준의 초기화다.
- 현재는 `JUnit 5`에서 모두 `@BeforeEach`, `@AfterEach`로 대체되었다.

</br>

# 7. 녹색이 좋다 : 테스트를 의미 있게 유지
- 실패하는 테스트가 있다면, 테스트를 더 늘리지 말고 그 테스트를 곧바로 고쳐야 한다.

## 테스트를 빠르게
- 단위 테스트는 빨라야 한다.
- 테스트가 빠르려면 외부 자원에 접근을 최소화 해야 한다.

## 테스트 제외
- 지금 당장 테스트를 제외하려면, `@Ignore` Annotation을 사용한다.

```java
@Test
@Ignore("I will change later")
public void testMethod() {

}
```
